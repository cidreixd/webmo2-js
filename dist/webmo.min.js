!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.Webmo=n():t.Webmo=n()}(window,(function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t,n,e){var r,o,i;i=function(){function t(t){var n=[];if(0===t.length)return"";if("string"!=typeof t[0])throw new TypeError("Url must be a string. Received "+t[0]);if(t[0].match(/^[^/:]+:\/*$/)&&t.length>1){var e=t.shift();t[0]=e+t[0]}t[0].match(/^file:\/\/\//)?t[0]=t[0].replace(/^([^/:]+):\/*/,"$1:///"):t[0]=t[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<t.length;r++){var o=t[r];if("string"!=typeof o)throw new TypeError("Url must be a string. Received "+o);""!==o&&(r>0&&(o=o.replace(/^[\/]+/,"")),o=r<t.length-1?o.replace(/[\/]+$/,""):o.replace(/[\/]+$/,"/"),n.push(o))}var i=n.join("/"),u=(i=i.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return i=u.shift()+(u.length>0?"?":"")+u.join("&")}return function(){return t("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},t.exports?t.exports=i():void 0===(o="function"==typeof(r=i)?r.call(n,e,n,t):r)||(t.exports=o)},function(t,n,e){"use strict";e.r(n),e.d(n,"motor1",(function(){return N})),e.d(n,"motor2",(function(){return D})),e.d(n,"motor",(function(){return J})),e.d(n,"httpClient",(function(){return B})),e.d(n,"socketClient",(function(){return K})),e.d(n,"init",(function(){return z})),e.d(n,"create",(function(){return I})),e.d(n,"wait",(function(){return q}));var r={uri:"/rotate/stop",method:"POST"},o={uri:"/rotate/lock",method:"POST"},i={uri:"/rotate",method:"POST"},u={uri:"/rotate/by",method:"POST"},c={uri:"/rotate/to",method:"POST"},a={uri:"/rotation",method:"GET"},l={uri:"/rotation/reset",method:"POST"},f=e(0),s=e.n(f),d="Not initialized. Please call init method.",v=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(u,c)}a((r=r.apply(t,n||[])).next())}))},p=function(t,n){var e,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(t,u)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},h=function(t){var n,e,f=!1,h=function(r,o){return v(void 0,void 0,void 0,(function(){var i;return p(this,(function(u){if(!f)throw Error(d);return n||e?(i=s()(r.uri,t.toString()),e?[2,e.send(i,r.method,o).catch((function(t){return v(void 0,void 0,void 0,(function(){return p(this,(function(e){return n?[2,n.send(i,r.method,o)]:[2,t]}))}))}))]:n?[2,n.send(i,r.method,o)]:[2]):[2]}))}))};return{setClient:function(t){var r=t.httpClient,o=t.socketClient;n=r,e=o,f=!0},stop:function(t){return v(void 0,void 0,void 0,(function(){return p(this,(function(n){return[2,h(r,t)]}))}))},lock:function(t){return v(void 0,void 0,void 0,(function(){return p(this,(function(n){return[2,h(o,t)]}))}))},rotate:function(t){return v(void 0,void 0,void 0,(function(){return p(this,(function(n){return[2,h(i,t)]}))}))},rotateBy:function(t){return v(void 0,void 0,void 0,(function(){return p(this,(function(n){return[2,h(u,t)]}))}))},rotateTo:function(t){return v(void 0,void 0,void 0,(function(){return p(this,(function(n){return[2,h(c,t)]}))}))},getRotation:function(){return v(void 0,void 0,void 0,(function(){return p(this,(function(t){return[2,h(a,null)]}))}))},resetRotation:function(t){return v(void 0,void 0,void 0,(function(){return p(this,(function(n){return[2,h(l,t)]}))}))}}},y=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(u,c)}a((r=r.apply(t,n||[])).next())}))},b=function(t,n){var e,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(t,u)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},m=function(){var t,n,e=!1,f=function(r,o){return y(void 0,void 0,void 0,(function(){var i;return b(this,(function(u){if(!e)throw Error(d);return i=r.uri,n?[2,n.send(i,r.method,o).catch((function(n){return y(void 0,void 0,void 0,(function(){return b(this,(function(e){return t?[2,t.send(i,r.method,o)]:[2,n]}))}))}))]:t?[2,t.send(i,r.method,o)]:[2]}))}))};return{setClient:function(r){var o=r.httpClient,i=r.socketClient;t=o,n=i,e=!0},stop:function(t,n){return y(void 0,void 0,void 0,(function(){return b(this,(function(e){return void 0===t||void 0===n||Array.isArray(t)||(t=[t,n]),[2,f(r,t)]}))}))},lock:function(t,n){return y(void 0,void 0,void 0,(function(){return b(this,(function(e){return void 0===t||void 0===n||Array.isArray(t)||(t=[t,n]),[2,f(o,t)]}))}))},rotate:function(t,n){return y(void 0,void 0,void 0,(function(){return b(this,(function(e){return void 0===t||void 0===n||Array.isArray(t)||(t=[t,n]),[2,f(i,t)]}))}))},rotateBy:function(t,n){return y(void 0,void 0,void 0,(function(){return b(this,(function(e){return void 0===t||void 0===n||Array.isArray(t)||(t=[t,n]),[2,f(u,t)]}))}))},rotateTo:function(t,n){return y(void 0,void 0,void 0,(function(){return b(this,(function(e){return void 0===t||void 0===n||Array.isArray(t)||(t=[t,n]),[2,f(c,t)]}))}))},getRotation:function(){return y(void 0,void 0,void 0,(function(){return b(this,(function(t){return[2,f(a,null)]}))}))},resetRotation:function(t,n){return y(void 0,void 0,void 0,(function(){return b(this,(function(e){return void 0===t||void 0===n||Array.isArray(t)||(t=[t,n]),[2,f(l,t)]}))}))}}},w="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),g=new Uint8Array(16);function k(){if(!w)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return w(g)}var x=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var C=function(t){return"string"==typeof t&&x.test(t)},S=[],T=0;T<256;++T)S.push((T+256).toString(16).substr(1));var E=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(S[t[n+0]]+S[t[n+1]]+S[t[n+2]]+S[t[n+3]]+"-"+S[t[n+4]]+S[t[n+5]]+"-"+S[t[n+6]]+S[t[n+7]]+"-"+S[t[n+8]]+S[t[n+9]]+"-"+S[t[n+10]]+S[t[n+11]]+S[t[n+12]]+S[t[n+13]]+S[t[n+14]]+S[t[n+15]]).toLowerCase();if(!C(e))throw TypeError("Stringified UUID is invalid");return e};var P,O=function(t,n,e){var r=(t=t||{}).random||(t.rng||k)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){e=e||0;for(var o=0;o<16;++o)n[e+o]=r[o];return n}return E(r)},j=function(){return(j=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},A=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(u,c)}a((r=r.apply(t,n||[])).next())}))},R=function(t,n){var e,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(t,u)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},G=j(j({},{all:P=P||new Map,on:function(t,n){var e=P.get(t);e&&e.push(n)||P.set(t,[n])},off:function(t,n){var e=P.get(t);e&&e.splice(e.indexOf(n)>>>0,1)},emit:function(t,n){(P.get(t)||[]).slice().map((function(t){t(n)})),(P.get("*")||[]).slice().map((function(e){e(t,n)}))}}),{once:function(){}});G.once=function(t,n){var e=function(r){G.off(t,e),n(r)};G.on(t,e)};var L=function(){var t=null,n=!1,e=function(t){n=!0,G.emit("open",t)},r=function(t){var n=JSON.parse(t.data);"UDP"===n.type?(delete n.type,G.emit("UDP",n)):n.receiveKey&&(G.emit(n.receiveKey,n.data),G.emit("message",n.data))},o=function(t){G.emit("close",t)},i=function(t){G.emit("error",t)};return{init:function(n){var u=n.host,c=n.url;G.all.clear(),t&&(t.removeEventListener("open",e),t.removeEventListener("message",r),t.removeEventListener("close",o),t.removeEventListener("error",i),t.close()),(t=new WebSocket(c||function(t){return"ws://"+t+":1337"}(u||"webmo.local")))&&(t.addEventListener("open",e),t.addEventListener("message",r),t.addEventListener("close",o),t.addEventListener("error",i))},send:function(n,e,r){return A(void 0,void 0,void 0,(function(){var o,i;return R(this,(function(u){if(!t)throw new Error(d);if(o=O().split("-").join(""),i={uri:n,method:e,key:o,data:r},1!=t.readyState)throw new Error("Websocket is not open.");return t.send(JSON.stringify(i)),[2,new Promise((function(t){G.once(o,(function(n){t(n)}))}))]}))}))},events:G,isOpen:n}},W=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(u,c)}a((r=r.apply(t,n||[])).next())}))},U=function(t,n){var e,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(t,u)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},$=function(t){return"http://"+t+"/api"},_=function(t,n){return W(void 0,void 0,void 0,(function(){return U(this,(function(e){switch(e.label){case 0:return[4,fetch(t,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()})).catch((function(t){throw t}))];case 1:return[2,e.sent()]}}))}))},M=function(){var t=$("webmo.local"),n=function(n,e,r){return W(void 0,void 0,void 0,(function(){return U(this,(function(o){return"POST"===e?[2,_(s()(t,n),r)]:"GET"===e?[2,(i=s()(t,n),W(void 0,void 0,void 0,(function(){return U(this,(function(t){switch(t.label){case 0:return[4,fetch(i,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).catch((function(t){throw t}))];case 1:return[2,t.sent()]}}))})))]:[2];var i}))}))};return{init:function(n){var e=n.host,r=n.url;t=r||$(e||"webmo.local")},send:n,ping:function(){return n("ping","GET",null)}}},V=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function u(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(u,c)}a((r=r.apply(t,n||[])).next())}))},H=function(t,n){var e,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(t,u)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},N=h(1),D=h(2),J=m(),B=M(),K=L(),z=function(t){var n="boolean"!=typeof(null==t?void 0:t.isHttp)||t.isHttp,e="boolean"!=typeof(null==t?void 0:t.isWebSocket)||(null==t?void 0:t.isWebSocket);B.init({host:null==t?void 0:t.host,url:null==t?void 0:t.http}),K.init({host:null==t?void 0:t.host,url:null==t?void 0:t.websocket});var r=n?B:void 0,o=e?K:void 0;N.setClient({httpClient:r,socketClient:o}),D.setClient({httpClient:r,socketClient:o}),J.setClient({httpClient:r,socketClient:o})},I=function(t){var n=h(1),e=h(2),r=m(),o=M(),i=L(),u="boolean"!=typeof(null==t?void 0:t.isHttp)||t.isHttp,c="boolean"!=typeof(null==t?void 0:t.isWebSocket)||(null==t?void 0:t.isWebSocket);o.init({host:null==t?void 0:t.host,url:null==t?void 0:t.http}),i.init({host:null==t?void 0:t.host,url:null==t?void 0:t.websocket});var a=u?o:void 0,l=c?i:void 0;return n.setClient({httpClient:a,socketClient:l}),e.setClient({httpClient:a,socketClient:l}),r.setClient({httpClient:a,socketClient:l}),{motor:r,motor1:n,motor2:e,httpClient:o,socketClient:i,wait:q}},q=function(t){return V(void 0,void 0,void 0,(function(){return H(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){return setTimeout(n,t)}))];case 1:return n.sent(),[2]}}))}))};n.default={init:z,create:I,motor:J,motor1:N,motor2:D,httpClient:B,socketClient:K,wait:q}}])}));